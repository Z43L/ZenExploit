// Incluir todos los archivos de encabezado necesarios.
#include "../include/api.h"
#include "../include/vector.h"
#include "../include/memory.h"
#include "../include/module_api.h"
#include "../include/plugin_interface.h"
#include "../include/plugin_manager.h"


#include <stdio.h>
#include <stdlib.h>
#include <string.h>


// Asegúrate de que todos los prototipos de funciones que se utilizarán estén declarados.
void initialize_framework();
void load_plugins();
void interactive_shell();
void list_attack_vectors();
void handle_connection(int client_socket);
void initialize_plugins();

int main(int argc, char **argv) {
    // Inicializar el framework y cargar cualquier configuración necesaria.
    initialize_framework();

    // Cargar plugins.
   // load_plugins();
    initialize_plugins();
    load_payloads_from_directory("exploits");

    // Iniciar el shell interactivo.
    interactive_shell();
    list_all_vectors();

    return 0;
}

void initialize_framework() {
    // Implementación específica para inicializar tu marco de trabajo.
    printf("Framework initialized successfully.\n");
}

void load_plugins() {
    // Aquí deberías cargar los plugins necesarios para tu aplicación.
    // Por ejemplo, supongamos que tienes un plugin almacenado en una ruta específica.
    const char* plugin_path = "./path/to/plugin.so";
    if (load_plugin(plugin_path) == 0) {
        printf("Plugin loaded successfully.\n");
    } else {
        printf("Failed to load plugin from path: %s\n", plugin_path);
    }

    // No olvides inicializar los plugins después de cargarlos.
    initialize_plugins();
    printf("Plugins initialized successfully.\n");
}

// Asegúrate de incluir las declaraciones de funciones adicionales necesarias
void list_attack_vectors();
void reset_configuration();
void start_listener_interface();
void configure_payload();
void execute_attack();
void list_all_vectors(void);


